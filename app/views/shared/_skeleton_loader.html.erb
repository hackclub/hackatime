<% type = local_assigns[:type] || :text_line %>
<% count = local_assigns[:count] || 1 %>

<% case type %>
<% when :stat_card %>
  <div class="bg-dark border border-primary rounded-xl p-4 transition-all duration-200 h-full animate-pulse">
    <div class="text-secondary text-xs mb-1 uppercase tracking-tight">
      <div class="h-3 w-20 bg-darkless rounded"></div>
    </div>
    <div class="text-lg font-semibold text-white">
      <div class="h-8 w-24 bg-darkless rounded mt-2"></div>
    </div>
  </div>
<% when :stat_cards %>
  <div class="grid grid-cols-[repeat(auto-fill,minmax(9.375rem,1fr))] gap-4">
    <% 6.times do %>
      <div class="bg-dark border border-primary rounded-xl p-4 transition-all duration-200 h-full animate-pulse">
        <div class="text-secondary text-xs mb-1 uppercase tracking-tight">
          <div class="h-3 w-20 bg-darkless rounded"></div>
        </div>
        <div class="text-lg font-semibold text-white">
          <div class="h-8 w-24 bg-darkless rounded mt-2"></div>
        </div>
      </div>
    <% end %>
  </div>
<% when :bar_graph %>
  <div class="bg-dark border border-primary rounded-xl p-6 flex flex-col animate-pulse">
    <div class="h-6 w-40 bg-darkless rounded mb-4"></div>
    <div class="mt-2 space-y-3">
      <% 5.times do |i| %>
        <div class="flex items-center mb-3 gap-3">
          <div class="h-4 w-24 bg-darkless rounded"></div>
          <div class="flex-1 h-7 bg-darkless rounded-lg overflow-hidden">
            <div class="h-6 bg-darkless rounded" style="width: <%= 100 - (i * 15) %>%"></div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% when :pie_chart %>
  <div class="bg-dark border border-primary rounded-xl p-6 flex flex-col animate-pulse">
    <div class="h-6 w-32 bg-darkless rounded mb-4"></div>
    <div class="flex-1 relative min-h-48 flex items-center justify-center">
      <div class="w-48 h-48 bg-darkless rounded-full"></div>
      <div class="ml-4 space-y-2">
        <% 5.times do %>
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 bg-darkless rounded"></div>
            <div class="h-3 w-16 bg-darkless rounded"></div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% when :activity_graph %>
  <div class="w-full overflow-x-auto mt-6 pb-2.5 animate-pulse">
    <div class="grid grid-rows-7 grid-flow-col gap-1 w-full lg:w-1/2">
      <% 365.times do %>
        <div class="w-3 h-3 rounded-sm bg-darkless"></div>
      <% end %>
    </div>
    <div class="h-3 w-48 bg-darkless rounded mt-2"></div>
  </div>
<% when :text_line %>
  <% count.times do %>
    <div class="h-4 bg-darkless rounded animate-pulse mb-2" style="width: <%= rand(60..100) %>%"></div>
  <% end %>
<% when :filters %>
  <div class="flex gap-4 mt-2 mb-6 flex-wrap animate-pulse">
    <% 5.times do %>
      <div class="flex-1 min-w-37.5 relative">
        <div class="h-4 w-16 bg-darkless rounded mb-2"></div>
        <div class="h-10 w-full bg-darkless rounded"></div>
      </div>
    <% end %>
  </div>
<% end %>
