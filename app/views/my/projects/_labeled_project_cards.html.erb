<%
  max = project_durations.map { |p| p[:duration] }.max || 1
%>
<div class="projects-grid">
  <% project_durations.each do |project| %>
    <div class="project-card">
      <div class="project-card-header">
        <div class="project-card-info">
          <h3 class="project-card-title" title="<%= h(project[:project]) %>">
            <%= h(project[:project].presence || "Unknown") %>
          </h3>
        </div>
        <div class="project-card-actions">
          <% if project[:playable_url].present? %>
            <%= link_to project[:playable_url], target: "_blank", title: "View project website", class: "project-card-action" do %>
              <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2s.06-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.92 7.92 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8 8 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.7 15.7 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10A10 10 0 0 0 12 2" />
              </svg>
            <% end %>
          <% end %>
          <% if project[:code_url].present? %>
            <%= link_to project[:code_url], target: "_blank", title: "View code", class: "project-card-action" do %>
              <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M2.6 10.59L8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23v5.54c-.6.34-1 .99-1 1.73a2 2 0 0 0 2 2a2 2 0 0 0 2-2c0-.74-.4-1.39-1-1.73V9.41l2.07 2.09c-.07.15-.07.32-.07.5a2 2 0 0 0 2 2a2 2 0 0 0 2-2a2 2 0 0 0-2-2c-.18 0-.35 0-.5.07L13.93 7.5a1.98 1.98 0 0 0-1.15-2.34c-.43-.16-.88-.2-1.28-.09L9.8 3.38l.79-.78c.78-.79 2.04-.79 2.82 0l7.99 7.99c.79.78.79 2.04 0 2.82l-7.99 7.99c-.78.79-2.04.79-2.82 0L2.6 13.41c-.79-.78-.79-2.04 0-2.82" />
              </svg>
            <% end %>
          <% end %>
          <%= link_to edit_my_project_label_path(project[:label]), class: "project-card-action", title: "Edit project label" do %>
            <svg viewBox="0 0 24 24">
              <path fill="currentColor" d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z" />
            </svg>
          <% end %>
        </div>
      </div>

      <div class="project-card-duration">
        <span class="project-card-time"><%= short_time_detailed project[:duration] %></span>
      </div>

      <% if project[:description].present? %>
        <div class="project-card-description">
          <%= h(project[:description]) %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
